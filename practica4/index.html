
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../practica3/">
      
      
        <link rel="next" href="../practica5/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title> Pr谩ctica 4 - Pr谩ctica_Comunicaci贸nSerial_NeoPixel - DOCUMENTACIN ELEMENTOS PROGRAMABLES II</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-4-practica_comunicacionserial_neopixel" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DOCUMENTACIN ELEMENTOS PROGRAMABLES II" class="md-header__button md-logo" aria-label="DOCUMENTACIN ELEMENTOS PROGRAMABLES II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DOCUMENTACIN ELEMENTOS PROGRAMABLES II
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
               Pr谩ctica 4 - Pr谩ctica_Comunicaci贸nSerial_NeoPixel
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DOCUMENTACIN ELEMENTOS PROGRAMABLES II" class="md-nav__button md-logo" aria-label="DOCUMENTACIN ELEMENTOS PROGRAMABLES II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DOCUMENTACIN ELEMENTOS PROGRAMABLES II
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentaci贸n del Proyecto
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../comandos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Encabezados EMMANUEL hhh
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ejemplo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
     DOCUMENTACIN ELEMENTOS PROGRAMABLES II
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
     Pr谩ctica 1 - NeoPixel_B谩sico
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
     Pr谩ctica 2 - Comunicaci贸nSerial_NeoPixel
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
     Pr谩ctica 3 - NeoPixel_ColorVariable
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
     Pr谩ctica 4 - Pr谩ctica_Comunicaci贸nSerial_NeoPixel
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
     Pr谩ctica 4 - Pr谩ctica_Comunicaci贸nSerial_NeoPixel
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-resumen" class="md-nav__link">
    <span class="md-ellipsis">
      
        1) Resum茅n 
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-codigo" class="md-nav__link">
    <span class="md-ellipsis">
      
        2) C贸digo 锔
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libreria-para-controlar-leds-neopixel-de-adafruit-desde-el-primer-include-hasta-el-ultimo-define-llevan-include-adafruit_neopixelh-ifdef-_avr_-include-avrpowerh-endif-configuracion-de-constantes-del-sistema-define-delayval-1000-tiempo-de-espera-en-milisegundos-entre-comandos-define-pin-8-pin-digital-donde-esta-conectado-el-led-neopixel-define-numpixels-1-cantidad-de-leds-en-la-tira-solo-1-led-inicializacion-del-objeto-neopixel-con-configuracion-grb-y-frecuencia-800khz-adafruit_neopixel-pixelsnumpixels-pin-neo_grb-neo_khz800-string-cmd-variable-global-para-almacenar-los-comandos-recibidos-por-serial-funcion-para-procesar-colores-rgb-personalizados-void-rgbcompletostring-input-int-r-g-b-variables-para-almacenar-valores-de-rojo-verde-y-azul-0-255-buscar-la-posicion-de-las-comas-separadoras-en-el-texto-int-koma1-inputindexof-primera-coma-int-koma2-inputindexof-koma1-1-segunda-coma-extraer-y-convertir-cada-valor-rgb-desde-el-string-r-inputsubstring0-koma1toint-valor-rojo-desde-inicio-hasta-primera-coma-g-inputsubstringkoma1-1-koma2toint-valor-verde-entre-las-dos-comas-b-inputsubstringkoma2-1toint-valor-azul-despues-de-la-segunda-coma-aplicar-el-color-al-led-y-mostrarlo-pixelssetpixelcolor0-pixelscolorr-g-b-configurar-color-en-el-led-0-pixelsshow-enviar-datos-al-led-para-que-se-actualice-delaydelayval-pausa-para-estabilizar-confirmar-al-usuario-que-color-se-aplico-serialprintlnrgb-stringr-stringg-stringb-configuracion-inicial-que-se-ejecuta-una-sola-vez-void-setup-serialbegin115200-inicializar-comunicacion-serial-a-115200-baudios-pixelsbegin-inicializar-el-sistema-neopixel-mostrar-instrucciones-de-uso-al-usuario-serialprintlncomandos-berde-roho-asul-al-contrario-puedes-apagarlo-con-off-o-escoger-las-siguientes-opciones-serialprintlnrgb-personalizado-rgb-ejemplo-25510050-bucle-principal-que-se-ejecuta-infinitamente-void-loop-verificar-si-hay-datos-disponibles-en-el-puerto-serial-ifserialavailable0-cmd-serialreadstringuntiln-leer-comando-hasta-encontrar-salto-de-linea-cmdtrim-eliminar-espacios-en-blanco-al-inicio-y-final-determinar-tipo-de-comando-recibido-y-ejecutar-accion-correspondiente-si-contiene-coma-es-un-comando-rgb-personalizado-ejemplo-25512864-ifcmdindexof-1-rgbcompletocmd-llamar-funcion-para-procesar-valores-rgb-comandos-de-colores-predefinidos-else-ifcmdberde-pixelssetpixelcolor0-pixelscolor0150-0-verde-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-verde-encendido-else-ifcmdroho-pixelssetpixelcolor0-pixelscolor1500-0-rojo-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-roho-encendido-else-ifcmdasul-pixelssetpixelcolor0-pixelscolor00-150-azul-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-blue-encendido-comando-para-apagar-el-led-else-if-cmdoff-pixelsclear-apagar-todos-los-leds-poner-en-000-pixelsshow-aplicar-cambios-delaydelayval-serialprintlnpicsel-apagado-manejo-de-errores-para-comandos-no-reconocidos-else-serialprintlncomando-no-reconocido" class="md-nav__link">
    <span class="md-ellipsis">
      
        # Librer铆a para controlar LEDs NeoPixel de Adafruit # Desde el primer include hasta el ultimo &quot;define&quot; llevan # include &lt;Adafruit_NeoPixel.h&gt; ifdef _AVR_ include &lt;avr/power.h&gt; endif # Configuraci贸n de constantes del sistema define DELAYVAL 1000 # Tiempo de espera en milisegundos entre comandos define PIN 8 # Pin digital donde est谩 conectado el LED NeoPixel define NUMPIXELS 1 # Cantidad de LEDs en la tira (solo 1 LED) # Inicializaci贸n del objeto NeoPixel con configuraci贸n GRB y frecuencia 800KHz Adafruit_NeoPixel pixels(NUMPIXELS, PIN, NEO_GRB + NEO_KHZ800); String cmd = &quot;&quot;; # Variable global para almacenar los comandos recibidos por serial # Funci贸n para procesar colores RGB personalizados void RGBcompleto(String input) { int r, g, b; # Variables para almacenar valores de Rojo, Verde y Azul (0-255) # Buscar la posici贸n de las comas separadoras en el texto int koma1 = input.indexOf(&#39;,&#39;); # Primera coma int koma2 = input.indexOf(&#39;,&#39;, koma1 + 1); # Segunda coma # Extraer y convertir cada valor RGB desde el string r = input.substring(0, koma1).toInt(); # Valor rojo: desde inicio hasta primera coma g = input.substring(koma1 + 1, koma2).toInt(); # Valor verde: entre las dos comas b = input.substring(koma2 + 1).toInt(); # Valor azul: despu茅s de la segunda coma # Aplicar el color al LED y mostrarlo pixels.setPixelColor(0, pixels.Color(r, g, b)); # Configurar color en el LED #0 pixels.show(); # Enviar datos al LED para que se actualice delay(DELAYVAL); # Pausa para estabilizar # Confirmar al usuario qu茅 color se aplic贸 Serial.println(&quot;RGB: &quot; + String(r) + &quot;,&quot; + String(g) + &quot;,&quot; + String(b)); } # Configuraci贸n inicial que se ejecuta una sola vez void setup() { Serial.begin(115200); # Inicializar comunicaci贸n serial a 115200 baudios pixels.begin(); # Inicializar el sistema NeoPixel # Mostrar instrucciones de uso al usuario Serial.println(&quot;Comandos: berde, roho, asul, al contrario puedes apagarlo con OFF, o escoger las siguientes opciones&quot;); Serial.println(&quot;RGB personalizado: R,G,B (ejemplo: 255,100,50)&quot;); } # Bucle principal que se ejecuta infinitamente void loop() { # Verificar si hay datos disponibles en el puerto serial if(Serial.available()&gt;0){ cmd = Serial.readStringUntil(&#39;\n&#39;); # Leer comando hasta encontrar salto de l铆nea cmd.trim(); # Eliminar espacios en blanco al inicio y final # Determinar tipo de comando recibido y ejecutar acci贸n correspondiente # Si contiene coma, es un comando RGB personalizado (ejemplo: 255,128,64) if(cmd.indexOf(&#39;,&#39;) != -1) { RGBcompleto(cmd); # Llamar funci贸n para procesar valores RGB } # Comandos de colores predefinidos else if(cmd==&quot;berde&quot;) { pixels.setPixelColor(0, pixels.Color(0,150, 0)); # Verde medio intensidad pixels.show(); delay(DELAYVAL); Serial.println(&quot;color verde encendido&quot;); } else if(cmd==&quot;roho&quot;) { pixels.setPixelColor(0, pixels.Color(150,0, 0)); # Rojo medio intensidad pixels.show(); delay(DELAYVAL); Serial.println(&quot;color roho encendido&quot;); } else if(cmd==&quot;asul&quot;) { pixels.setPixelColor(0, pixels.Color(0,0, 150)); # Azul medio intensidad pixels.show(); delay(DELAYVAL); Serial.println(&quot;color blue encendido&quot;); } # Comando para apagar el LED else if (cmd==&quot;OFF&quot;) { pixels.clear(); # Apagar todos los LEDs (poner en 0,0,0) pixels.show(); # Aplicar cambios delay(DELAYVAL); Serial.println(&quot;picsel apagado&quot;); } # Manejo de errores para comandos no reconocidos else { Serial.println(&quot;Comando no reconocido&quot;); } } }
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PRACTICA 5 - Comunicaci贸n_BLE_B谩sica
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PRACTICA 6 - Comunicaci贸n wifi
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PRACTICA 7 - Servidor_Web_LED_Control
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
     Pr谩ctica 9 - Pr谩ctica_ESP-NOW_MultiNodo_3Botones_3LEDs
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../proyectofinal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
     PROYECTO FINAL - ELEMENTOS PROGRAMABLES II
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-resumen" class="md-nav__link">
    <span class="md-ellipsis">
      
        1) Resum茅n 
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-codigo" class="md-nav__link">
    <span class="md-ellipsis">
      
        2) C贸digo 锔
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libreria-para-controlar-leds-neopixel-de-adafruit-desde-el-primer-include-hasta-el-ultimo-define-llevan-include-adafruit_neopixelh-ifdef-_avr_-include-avrpowerh-endif-configuracion-de-constantes-del-sistema-define-delayval-1000-tiempo-de-espera-en-milisegundos-entre-comandos-define-pin-8-pin-digital-donde-esta-conectado-el-led-neopixel-define-numpixels-1-cantidad-de-leds-en-la-tira-solo-1-led-inicializacion-del-objeto-neopixel-con-configuracion-grb-y-frecuencia-800khz-adafruit_neopixel-pixelsnumpixels-pin-neo_grb-neo_khz800-string-cmd-variable-global-para-almacenar-los-comandos-recibidos-por-serial-funcion-para-procesar-colores-rgb-personalizados-void-rgbcompletostring-input-int-r-g-b-variables-para-almacenar-valores-de-rojo-verde-y-azul-0-255-buscar-la-posicion-de-las-comas-separadoras-en-el-texto-int-koma1-inputindexof-primera-coma-int-koma2-inputindexof-koma1-1-segunda-coma-extraer-y-convertir-cada-valor-rgb-desde-el-string-r-inputsubstring0-koma1toint-valor-rojo-desde-inicio-hasta-primera-coma-g-inputsubstringkoma1-1-koma2toint-valor-verde-entre-las-dos-comas-b-inputsubstringkoma2-1toint-valor-azul-despues-de-la-segunda-coma-aplicar-el-color-al-led-y-mostrarlo-pixelssetpixelcolor0-pixelscolorr-g-b-configurar-color-en-el-led-0-pixelsshow-enviar-datos-al-led-para-que-se-actualice-delaydelayval-pausa-para-estabilizar-confirmar-al-usuario-que-color-se-aplico-serialprintlnrgb-stringr-stringg-stringb-configuracion-inicial-que-se-ejecuta-una-sola-vez-void-setup-serialbegin115200-inicializar-comunicacion-serial-a-115200-baudios-pixelsbegin-inicializar-el-sistema-neopixel-mostrar-instrucciones-de-uso-al-usuario-serialprintlncomandos-berde-roho-asul-al-contrario-puedes-apagarlo-con-off-o-escoger-las-siguientes-opciones-serialprintlnrgb-personalizado-rgb-ejemplo-25510050-bucle-principal-que-se-ejecuta-infinitamente-void-loop-verificar-si-hay-datos-disponibles-en-el-puerto-serial-ifserialavailable0-cmd-serialreadstringuntiln-leer-comando-hasta-encontrar-salto-de-linea-cmdtrim-eliminar-espacios-en-blanco-al-inicio-y-final-determinar-tipo-de-comando-recibido-y-ejecutar-accion-correspondiente-si-contiene-coma-es-un-comando-rgb-personalizado-ejemplo-25512864-ifcmdindexof-1-rgbcompletocmd-llamar-funcion-para-procesar-valores-rgb-comandos-de-colores-predefinidos-else-ifcmdberde-pixelssetpixelcolor0-pixelscolor0150-0-verde-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-verde-encendido-else-ifcmdroho-pixelssetpixelcolor0-pixelscolor1500-0-rojo-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-roho-encendido-else-ifcmdasul-pixelssetpixelcolor0-pixelscolor00-150-azul-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-blue-encendido-comando-para-apagar-el-led-else-if-cmdoff-pixelsclear-apagar-todos-los-leds-poner-en-000-pixelsshow-aplicar-cambios-delaydelayval-serialprintlnpicsel-apagado-manejo-de-errores-para-comandos-no-reconocidos-else-serialprintlncomando-no-reconocido" class="md-nav__link">
    <span class="md-ellipsis">
      
        # Librer铆a para controlar LEDs NeoPixel de Adafruit # Desde el primer include hasta el ultimo &quot;define&quot; llevan # include &lt;Adafruit_NeoPixel.h&gt; ifdef _AVR_ include &lt;avr/power.h&gt; endif # Configuraci贸n de constantes del sistema define DELAYVAL 1000 # Tiempo de espera en milisegundos entre comandos define PIN 8 # Pin digital donde est谩 conectado el LED NeoPixel define NUMPIXELS 1 # Cantidad de LEDs en la tira (solo 1 LED) # Inicializaci贸n del objeto NeoPixel con configuraci贸n GRB y frecuencia 800KHz Adafruit_NeoPixel pixels(NUMPIXELS, PIN, NEO_GRB + NEO_KHZ800); String cmd = &quot;&quot;; # Variable global para almacenar los comandos recibidos por serial # Funci贸n para procesar colores RGB personalizados void RGBcompleto(String input) { int r, g, b; # Variables para almacenar valores de Rojo, Verde y Azul (0-255) # Buscar la posici贸n de las comas separadoras en el texto int koma1 = input.indexOf(&#39;,&#39;); # Primera coma int koma2 = input.indexOf(&#39;,&#39;, koma1 + 1); # Segunda coma # Extraer y convertir cada valor RGB desde el string r = input.substring(0, koma1).toInt(); # Valor rojo: desde inicio hasta primera coma g = input.substring(koma1 + 1, koma2).toInt(); # Valor verde: entre las dos comas b = input.substring(koma2 + 1).toInt(); # Valor azul: despu茅s de la segunda coma # Aplicar el color al LED y mostrarlo pixels.setPixelColor(0, pixels.Color(r, g, b)); # Configurar color en el LED #0 pixels.show(); # Enviar datos al LED para que se actualice delay(DELAYVAL); # Pausa para estabilizar # Confirmar al usuario qu茅 color se aplic贸 Serial.println(&quot;RGB: &quot; + String(r) + &quot;,&quot; + String(g) + &quot;,&quot; + String(b)); } # Configuraci贸n inicial que se ejecuta una sola vez void setup() { Serial.begin(115200); # Inicializar comunicaci贸n serial a 115200 baudios pixels.begin(); # Inicializar el sistema NeoPixel # Mostrar instrucciones de uso al usuario Serial.println(&quot;Comandos: berde, roho, asul, al contrario puedes apagarlo con OFF, o escoger las siguientes opciones&quot;); Serial.println(&quot;RGB personalizado: R,G,B (ejemplo: 255,100,50)&quot;); } # Bucle principal que se ejecuta infinitamente void loop() { # Verificar si hay datos disponibles en el puerto serial if(Serial.available()&gt;0){ cmd = Serial.readStringUntil(&#39;\n&#39;); # Leer comando hasta encontrar salto de l铆nea cmd.trim(); # Eliminar espacios en blanco al inicio y final # Determinar tipo de comando recibido y ejecutar acci贸n correspondiente # Si contiene coma, es un comando RGB personalizado (ejemplo: 255,128,64) if(cmd.indexOf(&#39;,&#39;) != -1) { RGBcompleto(cmd); # Llamar funci贸n para procesar valores RGB } # Comandos de colores predefinidos else if(cmd==&quot;berde&quot;) { pixels.setPixelColor(0, pixels.Color(0,150, 0)); # Verde medio intensidad pixels.show(); delay(DELAYVAL); Serial.println(&quot;color verde encendido&quot;); } else if(cmd==&quot;roho&quot;) { pixels.setPixelColor(0, pixels.Color(150,0, 0)); # Rojo medio intensidad pixels.show(); delay(DELAYVAL); Serial.println(&quot;color roho encendido&quot;); } else if(cmd==&quot;asul&quot;) { pixels.setPixelColor(0, pixels.Color(0,0, 150)); # Azul medio intensidad pixels.show(); delay(DELAYVAL); Serial.println(&quot;color blue encendido&quot;); } # Comando para apagar el LED else if (cmd==&quot;OFF&quot;) { pixels.clear(); # Apagar todos los LEDs (poner en 0,0,0) pixels.show(); # Aplicar cambios delay(DELAYVAL); Serial.println(&quot;picsel apagado&quot;); } # Manejo de errores para comandos no reconocidos else { Serial.println(&quot;Comando no reconocido&quot;); } } }
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-4-practica_comunicacionserial_neopixel"> Pr谩ctica 4 - Pr谩ctica_Comunicaci贸nSerial_NeoPixel</h1>
<blockquote>
<p>El programa convierte el ESP32 en un "asistente de colores", que entiende comandos en "espa帽ol", procesa la informaci贸n usando funciones como indexof() y substring() para entender comandos. Es importante saber esto pues ense帽a conceptos de comunicaci贸n entre dispositivos (hardaware externo), como procesar datos de texto y uso de librerias.</p>
</blockquote>
<hr />
<h2 id="1-resumen">1) Resum茅n </h2>
<ul>
<li><strong>Equipo / Autor(es):</strong> Emmanuel Angeles Barreto</li>
<li><strong>Curso / Asignatura:</strong> Elementos Programables II  </li>
<li><strong>Fecha:</strong> 23/09/25  </li>
</ul>
<hr />
<h2 id="2-codigo">2) C贸digo 锔</h2>
<h2 id="libreria-para-controlar-leds-neopixel-de-adafruit-desde-el-primer-include-hasta-el-ultimo-define-llevan-include-adafruit_neopixelh-ifdef-_avr_-include-avrpowerh-endif-configuracion-de-constantes-del-sistema-define-delayval-1000-tiempo-de-espera-en-milisegundos-entre-comandos-define-pin-8-pin-digital-donde-esta-conectado-el-led-neopixel-define-numpixels-1-cantidad-de-leds-en-la-tira-solo-1-led-inicializacion-del-objeto-neopixel-con-configuracion-grb-y-frecuencia-800khz-adafruit_neopixel-pixelsnumpixels-pin-neo_grb-neo_khz800-string-cmd-variable-global-para-almacenar-los-comandos-recibidos-por-serial-funcion-para-procesar-colores-rgb-personalizados-void-rgbcompletostring-input-int-r-g-b-variables-para-almacenar-valores-de-rojo-verde-y-azul-0-255-buscar-la-posicion-de-las-comas-separadoras-en-el-texto-int-koma1-inputindexof-primera-coma-int-koma2-inputindexof-koma1-1-segunda-coma-extraer-y-convertir-cada-valor-rgb-desde-el-string-r-inputsubstring0-koma1toint-valor-rojo-desde-inicio-hasta-primera-coma-g-inputsubstringkoma1-1-koma2toint-valor-verde-entre-las-dos-comas-b-inputsubstringkoma2-1toint-valor-azul-despues-de-la-segunda-coma-aplicar-el-color-al-led-y-mostrarlo-pixelssetpixelcolor0-pixelscolorr-g-b-configurar-color-en-el-led-0-pixelsshow-enviar-datos-al-led-para-que-se-actualice-delaydelayval-pausa-para-estabilizar-confirmar-al-usuario-que-color-se-aplico-serialprintlnrgb-stringr-stringg-stringb-configuracion-inicial-que-se-ejecuta-una-sola-vez-void-setup-serialbegin115200-inicializar-comunicacion-serial-a-115200-baudios-pixelsbegin-inicializar-el-sistema-neopixel-mostrar-instrucciones-de-uso-al-usuario-serialprintlncomandos-berde-roho-asul-al-contrario-puedes-apagarlo-con-off-o-escoger-las-siguientes-opciones-serialprintlnrgb-personalizado-rgb-ejemplo-25510050-bucle-principal-que-se-ejecuta-infinitamente-void-loop-verificar-si-hay-datos-disponibles-en-el-puerto-serial-ifserialavailable0-cmd-serialreadstringuntiln-leer-comando-hasta-encontrar-salto-de-linea-cmdtrim-eliminar-espacios-en-blanco-al-inicio-y-final-determinar-tipo-de-comando-recibido-y-ejecutar-accion-correspondiente-si-contiene-coma-es-un-comando-rgb-personalizado-ejemplo-25512864-ifcmdindexof-1-rgbcompletocmd-llamar-funcion-para-procesar-valores-rgb-comandos-de-colores-predefinidos-else-ifcmdberde-pixelssetpixelcolor0-pixelscolor0150-0-verde-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-verde-encendido-else-ifcmdroho-pixelssetpixelcolor0-pixelscolor1500-0-rojo-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-roho-encendido-else-ifcmdasul-pixelssetpixelcolor0-pixelscolor00-150-azul-medio-intensidad-pixelsshow-delaydelayval-serialprintlncolor-blue-encendido-comando-para-apagar-el-led-else-if-cmdoff-pixelsclear-apagar-todos-los-leds-poner-en-000-pixelsshow-aplicar-cambios-delaydelayval-serialprintlnpicsel-apagado-manejo-de-errores-para-comandos-no-reconocidos-else-serialprintlncomando-no-reconocido"><div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Librer铆a para controlar LEDs NeoPixel de Adafruit</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1"># Desde el primer include hasta el ultimo &quot;define&quot; llevan #</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>include<span class="w"> </span>&lt;Adafruit_NeoPixel.h&gt;
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>ifdef<span class="w"> </span>_AVR_
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w"> </span>include<span class="w"> </span>&lt;avr/power.h&gt;<span class="w"> </span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>endif
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># Configuraci贸n de constantes del sistema</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>define<span class="w"> </span>DELAYVAL<span class="w"> </span><span class="m">1000</span><span class="w">  </span><span class="c1"># Tiempo de espera en milisegundos entre comandos</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>define<span class="w"> </span>PIN<span class="w">  </span><span class="m">8</span><span class="w">         </span><span class="c1"># Pin digital donde est谩 conectado el LED NeoPixel</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>define<span class="w"> </span>NUMPIXELS<span class="w"> </span><span class="m">1</span><span class="w">    </span><span class="c1"># Cantidad de LEDs en la tira (solo 1 LED)</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c1"># Inicializaci贸n del objeto NeoPixel con configuraci贸n GRB y frecuencia 800KHz</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>Adafruit_NeoPixel<span class="w"> </span>pixels<span class="o">(</span>NUMPIXELS,<span class="w"> </span>PIN,<span class="w"> </span>NEO_GRB<span class="w"> </span>+<span class="w"> </span>NEO_KHZ800<span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>String<span class="w"> </span><span class="nv">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1"># Variable global para almacenar los comandos recibidos por  serial</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="c1"># Funci贸n para procesar colores RGB personalizados</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>void<span class="w"> </span>RGBcompleto<span class="o">(</span>String<span class="w"> </span>input<span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">  </span>int<span class="w"> </span>r,<span class="w"> </span>g,<span class="w"> </span>b<span class="p">;</span><span class="w"> </span><span class="c1"># Variables para almacenar valores de Rojo, Verde y Azul (0-255)</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">  </span><span class="c1"># Buscar la posici贸n de las comas separadoras en el texto</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">  </span>int<span class="w"> </span><span class="nv">koma1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>input.indexOf<span class="o">(</span><span class="s1">&#39;,&#39;</span><span class="o">)</span><span class="p">;</span><span class="w">           </span><span class="c1"># Primera coma</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">  </span>int<span class="w"> </span><span class="nv">koma2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>input.indexOf<span class="o">(</span><span class="s1">&#39;,&#39;</span>,<span class="w"> </span>koma1<span class="w"> </span>+<span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="p">;</span><span class="w"> </span><span class="c1"># Segunda coma</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">  </span><span class="c1"># Extraer y convertir cada valor RGB desde el string</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">  </span><span class="nv">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>input.substring<span class="o">(</span><span class="m">0</span>,<span class="w"> </span>koma1<span class="o">)</span>.toInt<span class="o">()</span><span class="p">;</span><span class="w">             </span><span class="c1"># Valor rojo: desde inicio hasta primera coma</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">  </span><span class="nv">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>input.substring<span class="o">(</span>koma1<span class="w"> </span>+<span class="w"> </span><span class="m">1</span>,<span class="w"> </span>koma2<span class="o">)</span>.toInt<span class="o">()</span><span class="p">;</span><span class="w">     </span><span class="c1"># Valor verde: entre las dos comas</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">  </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>input.substring<span class="o">(</span>koma2<span class="w"> </span>+<span class="w"> </span><span class="m">1</span><span class="o">)</span>.toInt<span class="o">()</span><span class="p">;</span><span class="w">            </span><span class="c1"># Valor azul: despu茅s de la segunda coma</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">  </span><span class="c1"># Aplicar el color al LED y mostrarlo</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">  </span>pixels.setPixelColor<span class="o">(</span><span class="m">0</span>,<span class="w"> </span>pixels.Color<span class="o">(</span>r,<span class="w"> </span>g,<span class="w"> </span>b<span class="o">))</span><span class="p">;</span><span class="w">  </span><span class="c1"># Configurar color en el LED #0</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">  </span>pixels.show<span class="o">()</span><span class="p">;</span><span class="w">                                   </span><span class="c1"># Enviar datos al LED para que se actualice</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">  </span>delay<span class="o">(</span>DELAYVAL<span class="o">)</span><span class="p">;</span><span class="w">                                 </span><span class="c1"># Pausa para estabilizar</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">  </span><span class="c1"># Confirmar al usuario qu茅 color se aplic贸</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="w">  </span>Serial.println<span class="o">(</span><span class="s2">&quot;RGB: &quot;</span><span class="w"> </span>+<span class="w"> </span>String<span class="o">(</span>r<span class="o">)</span><span class="w"> </span>+<span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span>+<span class="w"> </span>String<span class="o">(</span>g<span class="o">)</span><span class="w"> </span>+<span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span>+<span class="w"> </span>String<span class="o">(</span>b<span class="o">))</span><span class="p">;</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="o">}</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="c1"># Configuraci贸n inicial que se ejecuta una sola vez</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>void<span class="w"> </span>setup<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="w">  </span>Serial.begin<span class="o">(</span><span class="m">115200</span><span class="o">)</span><span class="p">;</span><span class="w">  </span><span class="c1"># Inicializar comunicaci贸n serial a 115200 baudios</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="w">  </span>pixels.begin<span class="o">()</span><span class="p">;</span><span class="w">        </span><span class="c1"># Inicializar el sistema NeoPixel</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a><span class="w">  </span><span class="c1"># Mostrar instrucciones de uso al usuario</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="w">  </span>Serial.println<span class="o">(</span><span class="s2">&quot;Comandos: berde, roho, asul, al contrario puedes apagarlo con OFF, o escoger las siguientes opciones&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="w">  </span>Serial.println<span class="o">(</span><span class="s2">&quot;RGB personalizado: R,G,B (ejemplo: 255,100,50)&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="o">}</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="c1"># Bucle principal que se ejecuta infinitamente</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>void<span class="w"> </span>loop<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="w">  </span><span class="c1"># Verificar si hay datos disponibles en el puerto serial</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a><span class="w">  </span><span class="k">if</span><span class="o">(</span>Serial.available<span class="o">()</span>&gt;0<span class="o">){</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a><span class="w">    </span><span class="nv">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Serial.readStringUntil<span class="o">(</span><span class="s1">&#39;\n&#39;</span><span class="o">)</span><span class="p">;</span><span class="w">  </span><span class="c1"># Leer comando hasta encontrar salto de l铆nea</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a><span class="w">    </span>cmd.trim<span class="o">()</span><span class="p">;</span><span class="w">                          </span><span class="c1"># Eliminar espacios en blanco al inicio y final</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a><span class="w">    </span><span class="c1"># Determinar tipo de comando recibido y ejecutar acci贸n correspondiente</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a><span class="w">    </span><span class="c1"># Si contiene coma, es un comando RGB personalizado (ejemplo: 255,128,64)</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a><span class="w">    </span><span class="k">if</span><span class="o">(</span>cmd.indexOf<span class="o">(</span><span class="s1">&#39;,&#39;</span><span class="o">)</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span>-1<span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a><span class="w">      </span>RGBcompleto<span class="o">(</span>cmd<span class="o">)</span><span class="p">;</span><span class="w">  </span><span class="c1"># Llamar funci贸n para procesar valores RGB</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a><span class="w">    </span><span class="c1"># Comandos de colores predefinidos</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="o">(</span><span class="nv">cmd</span><span class="o">==</span><span class="s2">&quot;berde&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a><span class="w">      </span>pixels.setPixelColor<span class="o">(</span><span class="m">0</span>,<span class="w"> </span>pixels.Color<span class="o">(</span><span class="m">0</span>,150,<span class="w"> </span><span class="m">0</span><span class="o">))</span><span class="p">;</span><span class="w">  </span><span class="c1"># Verde medio intensidad</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a><span class="w">      </span>pixels.show<span class="o">()</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a><span class="w">      </span>delay<span class="o">(</span>DELAYVAL<span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a><span class="w">      </span>Serial.println<span class="o">(</span><span class="s2">&quot;color verde encendido&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="o">(</span><span class="nv">cmd</span><span class="o">==</span><span class="s2">&quot;roho&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a><span class="w">      </span>pixels.setPixelColor<span class="o">(</span><span class="m">0</span>,<span class="w"> </span>pixels.Color<span class="o">(</span><span class="m">150</span>,0,<span class="w"> </span><span class="m">0</span><span class="o">))</span><span class="p">;</span><span class="w">  </span><span class="c1"># Rojo medio intensidad</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a><span class="w">      </span>pixels.show<span class="o">()</span><span class="p">;</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a><span class="w">      </span>delay<span class="o">(</span>DELAYVAL<span class="o">)</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a><span class="w">      </span>Serial.println<span class="o">(</span><span class="s2">&quot;color roho encendido&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="o">(</span><span class="nv">cmd</span><span class="o">==</span><span class="s2">&quot;asul&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a><span class="w">      </span>pixels.setPixelColor<span class="o">(</span><span class="m">0</span>,<span class="w"> </span>pixels.Color<span class="o">(</span><span class="m">0</span>,0,<span class="w"> </span><span class="m">150</span><span class="o">))</span><span class="p">;</span><span class="w">  </span><span class="c1"># Azul medio intensidad</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a><span class="w">      </span>pixels.show<span class="o">()</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a><span class="w">      </span>delay<span class="o">(</span>DELAYVAL<span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a><span class="w">      </span>Serial.println<span class="o">(</span><span class="s2">&quot;color blue encendido&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a><span class="w">    </span><span class="c1"># Comando para apagar el LED</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="nv">cmd</span><span class="o">==</span><span class="s2">&quot;OFF&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a><span class="w">      </span>pixels.clear<span class="o">()</span><span class="p">;</span><span class="w">   </span><span class="c1"># Apagar todos los LEDs (poner en 0,0,0)</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a><span class="w">      </span>pixels.show<span class="o">()</span><span class="p">;</span><span class="w">    </span><span class="c1"># Aplicar cambios</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a><span class="w">      </span>delay<span class="o">(</span>DELAYVAL<span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a><span class="w">      </span>Serial.println<span class="o">(</span><span class="s2">&quot;picsel apagado&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a><span class="w">    </span><span class="c1"># Manejo de errores para comandos no reconocidos</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a><span class="w">      </span>Serial.println<span class="o">(</span><span class="s2">&quot;Comando no reconocido&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a><span class="w">  </span><span class="o">}</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a><span class="o">}</span>
</span></code></pre></div></h2>
<h1 id="3-evidencias-del-resultado-final">3) Evidencias del resultado final </h1>
<p><img alt="Diagrama del sistema" src="../recursos/imgs/ledcolor.jpg" /></p>
<p><a href="https://youtu.be/20FBP9kdGKE" title="Video muestra YT">VIDEO MUESTRA YT</a></p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "content.tooltips"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>